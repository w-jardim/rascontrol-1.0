<div class='agentes-container'>
  <!-- Modo Visualização (Ficha) -->
  <div *ngIf='modoVisualizacao' class='ficha-container'>
    <div class='page-header'>
      <h1>Ficha do Agente</h1>
      <p>Sistema de Controle RAS - PMERJ</p>
    </div>

    <div class='ficha-content'>
      <div class='ficha-card' *ngIf='getAgente() as agente'>
        <div class='ficha-info-section'>
          <h2>Dados Pessoais do Agente</h2>

          <div class='info-grid'>
            <div class='info-item'>
              <label class='info-label'>
                <ng-icon name="lucideUser" class='label-icon'></ng-icon>
                Nome Completo:
              </label>
              <div class='info-value'>{{ agente.nomeCompleto }}</div>
            </div>

            <div class='info-item'>
              <label class='info-label'>
                <ng-icon name="lucideFile" class='label-icon'></ng-icon>
                Nome de Escala:
              </label>
              <div class='info-value'>{{ agente.nomeEscala }}</div>
            </div>

            <div class='info-item'>
              <label class='info-label'>
                <ng-icon name="lucideStar" class='label-icon'></ng-icon>
                Posto/Graduação:
              </label>
              <div class='info-value'>{{ agente.postoGraduacao }}</div>
            </div>

            <div class='info-item'>
              <label class='info-label'>
                <ng-icon name="lucideBuilding" class='label-icon'></ng-icon>
                Unidade de Lotação:
              </label>
              <div class='info-value'>{{ agente.unidadeLotacao }}</div>
            </div>

            <div class='info-item'>
              <label class='info-label'>
                <ng-icon name="lucideIdCard" class='label-icon'></ng-icon>
                RG:
              </label>
              <div class='info-value'>{{ agente.rg }}</div>
            </div>

            <div class='info-item'>
              <label class='info-label'>
                <ng-icon name="lucideIdCard" class='label-icon'></ng-icon>
                ID Funcional:
              </label>
              <div class='info-value'>{{ agente.idFuncional }}</div>
            </div>
          </div>
        </div>
      </div>

      <div class='ficha-actions'>
        <button class='btn-editar' (click)='habilitarEdicao()'>
          <ng-icon name="lucideEdit" class='btn-icon'></ng-icon>
          Editar Dados
        </button>

        <button class='btn-voltar' (click)='voltarDashboard()'>
          <span class='btn-icon'>←</span>
          Voltar ao Dashboard
        </button>
      </div>
    </div>
  </div>

  <!-- Modo Formulário (Cadastro/Edição) -->
  <div *ngIf='!modoVisualizacao'>
    <div class='page-header'>
      <h1>{{ modoEdicao ? 'Editar Dados do Agente' : 'Cadastro de Agente' }}</h1>
      <p>{{ modoEdicao ? 'Atualize suas informações pessoais' : 'Preencha os dados pessoais do agente de segurança pública' }}</p>
    </div>

    <div class='form-container'>
      <form [formGroup]='agenteForm' (ngSubmit)='onSubmit()' class='agente-form'>

      <!-- Nome Completo -->
      <div class='form-group'>
        <label for='nomeCompleto' class='form-label'>
          Nome Completo *
        </label>
        <input
          type='text'
          id='nomeCompleto'
          formControlName='nomeCompleto'
          class='form-control'
          placeholder='Digite o nome completo'
        />
      </div>

      <!-- Nome de Escala -->
      <div class='form-group'>
        <label for='nomeEscala' class='form-label'>
          Nome de Escala *
        </label>
        <input
          type='text'
          id='nomeEscala'
          formControlName='nomeEscala'
          class='form-control'
          placeholder='Digite o nome da escala'
        />
      </div>

      <!-- Posto ou Graduação -->
      <div class='form-group'>
        <label for='postoGraduacao' class='form-label'>
          Posto ou Graduação *
        </label>
        <select
          id='postoGraduacao'
          formControlName='postoGraduacao'
          class='form-control'
        >
          <option value=''>Selecione o posto/graduação</option>
          <option value='Soldado'>Soldado</option>
          <option value='Cabo'>Cabo</option>
          <option value='3º Sargento'>3º Sargento</option>
          <option value='2º Sargento'>2º Sargento</option>
          <option value='1º Sargento'>1º Sargento</option>
          <option value='Subtenente'>Subtenente</option>
          <option value='2º Tenente'>2º Tenente</option>
          <option value='1º Tenente'>1º Tenente</option>
          <option value='Capitão'>Capitão</option>
          <option value='Major'>Major</option>
          <option value='Tenente-Coronel'>Tenente-Coronel</option>
          <option value='Coronel'>Coronel</option>
        </select>
      </div>

      <!-- Unidade de Lotação -->
      <div class='form-group'>
        <label for='unidadeLotacao' class='form-label'>
          Unidade de Lotação *
        </label>
        <input
          type='text'
          id='unidadeLotacao'
          formControlName='unidadeLotacao'
          class='form-control'
          placeholder='Digite a unidade de lotação'
        />
      </div>

      <!-- RG -->
      <div class='form-group'>
        <label for='rg' class='form-label'>
          RG *
        </label>
        <input
          type='text'
          id='rg'
          formControlName='rg'
          class='form-control'
          placeholder='Digite o RG (apenas números)'
          maxlength='6'
        />
      </div>

      <!-- ID Funcional -->
      <div class='form-group'>
        <label for='idFuncional' class='form-label'>
          ID Funcional *
        </label>
        <input
          type='text'
          id='idFuncional'
          formControlName='idFuncional'
          class='form-control'
          placeholder='Digite o ID funcional'
        />
      </div>

      <!-- Mensagens de Status -->
      <div class='status-messages form-group-full'>
        <div class='success-message' *ngIf='successMessage'>
          Dados salvos com sucesso!
        </div>
        <div class='error-message' *ngIf='errorMessage && !successMessage'>
          {{ errorMessage }}
        </div>
      </div>

      <!-- Botões -->
      <div class='form-actions'>
        <button type='submit' class='btn-submit' [disabled]='agenteForm.invalid'>
          <span class='btn-icon'>✓</span>
          {{ modoEdicao ? 'Atualizar Dados' : 'Salvar Dados' }}
        </button>
        <button type='button' class='btn-reset' (click)='agenteForm.reset()'>
          <span class='btn-icon'>↺</span>
          Limpar Formulário
        </button>
      </div>
    </form>
  </div>
</div>
