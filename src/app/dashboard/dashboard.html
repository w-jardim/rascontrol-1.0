<div class="dashboard-container">
  <app-sidebar [currentView]="currentView" (navigateTo)="navigateTo($event)"></app-sidebar>

  <!-- Header Sticky -->
  <header class="sticky-header">
    <div class="header-content">
      <h1>{{ getHeaderTitle() }}</h1>
      <p>{{ getHeaderSubtitle() }}</p>
    </div>
  </header>

  <main class="main-content">
    <!-- View Dashboard -->
    <div *ngIf="currentView === 'dashboard'">
      <div class="content-body">
        <!-- Alerta de Servi√ßos Urgentes -->
        <div class="alert-section" *ngIf="servicosUrgentes.length > 0">
          <div class="alert-card">
            <div class="alert-header">
              <ng-icon name="lucideAlertTriangle" class="alert-icon"></ng-icon>
              <h3>Aten√ß√£o! Servi√ßos Pr√≥ximos</h3>
            </div>
            <div class="alert-content">
              <p>Voc√™ tem {{ servicosUrgentes.length }} servi√ßo(s) programado(s) para os pr√≥ximos 2 dias:</p>
              <div class="urgent-services">
                <div class="urgent-item" *ngFor="let servico of servicosUrgentes">
                  <div class="urgent-date">
                    <span class="urgent-day">{{ getDiaServico(servico.data) }}</span>
                    <span class="urgent-month">{{ getMesServico(servico.data) }}</span>
                  </div>
                  <div class="urgent-info">
                    <strong>{{ servico.convenio.toUpperCase() }} - {{ servico.hora }}</strong>
                    <br>
                    <small>{{ servico.evento | titlecase }} ‚Ä¢ {{ servico.tipoHora }}</small>
                  </div>
                  <div class="urgent-value">
                    R$ {{ calcularValorServico(servico) | number:'1.2-2' }}
                  </div>
                </div>
              </div>
            </div>
            <div class="alert-actions">
              <button class="btn-alert" routerLink="/escalas">
                <ng-icon name="lucideCalendar" class="btn-icon"></ng-icon>
                Ver Escala Completa
              </button>
            </div>
          </div>
        </div>

        <!-- Cards de M√©tricas -->
        <div class="metrics-grid">
          <!-- Card Agente -->
          <div class="metric-card" [class.active]="agenteData">
            <div class="card-header">
              <div class="card-icon">
                <ng-icon name="lucideUser" class="metric-icon"></ng-icon>
              </div>
              <div class="card-title">
                <h3>Agente</h3>
                <p>{{ agenteData ? 'Cadastrado' : 'N√£o cadastrado' }}</p>
              </div>
            </div>
            <div class="card-content">
              <div class="metric-value">
                {{ agenteData ? agenteData.nomeEscala : '--' }}
              </div>
              <div class="metric-label">
                {{ agenteData ? agenteData.postoGraduacao : 'Clique para cadastrar' }}
              </div>
            </div>
            <div class="card-actions">
              <button class="btn-card" (click)="navigateTo('agentes')">
                <ng-icon name="lucideEdit" class="btn-icon"></ng-icon>
                {{ agenteData ? 'Editar' : 'Cadastrar' }}
              </button>
            </div>
          </div>

          <!-- Card Servi√ßos -->
          <div class="metric-card" [class.active]="servicos.length > 0">
            <div class="card-header">
              <div class="card-icon">
                <ng-icon name="lucideFileText" class="metric-icon"></ng-icon>
              </div>
              <div class="card-title">
                <h3>Servi√ßos RAS</h3>
                <p>Total cadastrados</p>
              </div>
            </div>
            <div class="card-content">
              <div class="metric-value">{{ servicos.length }}</div>
              <div class="metric-label">Servi√ßos registrados</div>
            </div>
            <div class="card-actions">
              <button class="btn-card" (click)="navigateTo('servicos-ras')">
                <ng-icon name="lucidePlus" class="btn-icon"></ng-icon>
                Novo Servi√ßo
              </button>
            </div>
          </div>

          <!-- Card Valores Totais -->
          <div class="metric-card" [class.active]="valorTotal > 0">
            <div class="card-header">
              <div class="card-icon">
                <ng-icon name="lucideDollarSign" class="metric-icon"></ng-icon>
              </div>
              <div class="card-title">
                <h3>Valor Total</h3>
                <p>Recebimentos estimados</p>
              </div>
            </div>
            <div class="card-content">
              <div class="metric-value">R$ {{ valorTotal | number:'1.2-2' }}</div>
              <div class="metric-label">Valor acumulado</div>
            </div>
            <div class="card-actions">
              <button class="btn-card" routerLink="/escalas">
                <ng-icon name="lucideCalendar" class="btn-icon"></ng-icon>
                Ver Escala
              </button>
            </div>
          </div>

          <!-- Card Estat√≠sticas -->
          <div class="metric-card">
            <div class="card-header">
              <div class="card-icon">
                <ng-icon name="lucideBarChart3" class="metric-icon"></ng-icon>
              </div>
              <div class="card-title">
                <h3>Estat√≠sticas</h3>
                <p>Vis√£o geral</p>
              </div>
            </div>
            <div class="card-content">
              <div class="stats-grid">
                <div class="stat-item">
                  <span class="stat-value">{{ getServicosPorConvenio('ras') }}</span>
                  <span class="stat-label">RAS</span>
                </div>
                <div class="stat-item">
                  <span class="stat-value">{{ getServicosPorConvenio('proeis') }}</span>
                  <span class="stat-label">PROEIS</span>
                </div>
                <div class="stat-item">
                  <span class="stat-value">{{ getServicosPorEvento('voluntario') }}</span>
                  <span class="stat-label">Volunt√°rios</span>
                </div>
                <div class="stat-item">
                  <span class="stat-value">{{ getServicosPorEvento('compulsorio') }}</span>
                  <span class="stat-label">Compuls√≥rios</span>
                </div>
              </div>
            </div>
            <div class="card-actions">
              <button class="btn-card" routerLink="/configuracao-valores">
                <ng-icon name="lucideSettings" class="btn-icon"></ng-icon>
                Configurar
              </button>
            </div>
          </div>
        </div>

        <!-- Pr√≥ximos Servi√ßos (em destaque) -->
        <div class="upcoming-section" *ngIf="proximosServicos.length > 0">
          <h2>üö® Pr√≥ximos Servi√ßos</h2>
          <div class="upcoming-list">
            <div class="upcoming-item" *ngFor="let servico of proximosServicos">
              <div class="upcoming-date">
                <div class="date-day">{{ getDiaServico(servico.data) }}</div>
                <div class="date-month">{{ getMesServico(servico.data) }}</div>
              </div>
              <div class="upcoming-details">
                <h4>Servi√ßo {{ servico.convenio.toUpperCase() }}</h4>
                <p>{{ servico.evento | titlecase }} ‚Ä¢ {{ servico.hora }} ‚Ä¢ {{ servico.tipoHora }}</p>
                <span class="upcoming-value">R$ {{ calcularValorServico(servico) | number:'1.2-2' }}</span>
              </div>
              <div class="upcoming-status">
                <span class="status-badge" [class]="'status-' + servico.tipoVaga">
                  {{ servico.tipoVaga | titlecase }}
                </span>
              </div>
            </div>
          </div>
        </div>

        <!-- Cards de A√ß√µes R√°pidas -->
        <div class="actions-section">
          <h2>A√ß√µes R√°pidas</h2>
          <div class="actions-grid">
            <div class="action-card" (click)="navigateTo('agentes')">
              <div class="action-icon">
                <ng-icon name="lucideUserPlus" class="action-icon-svg"></ng-icon>
              </div>
              <div class="action-content">
                <h4>Gerenciar Agente</h4>
                <p>Cadastrar ou editar dados do agente</p>
              </div>
              <div class="action-arrow">
                <ng-icon name="lucideChevronRight" class="arrow-icon"></ng-icon>
              </div>
            </div>

            <div class="action-card" (click)="navigateTo('servicos-ras')">
              <div class="action-icon">
                <ng-icon name="lucideFileText" class="action-icon-svg"></ng-icon>
              </div>
              <div class="action-content">
                <h4>Criar Servi√ßo RAS</h4>
                <p>Registrar novo servi√ßo de regime adicional</p>
              </div>
              <div class="action-arrow">
                <ng-icon name="lucideChevronRight" class="arrow-icon"></ng-icon>
              </div>
            </div>

            <div class="action-card" routerLink="/escalas">
              <div class="action-icon">
                <ng-icon name="lucideCalendar" class="action-icon-svg"></ng-icon>
              </div>
              <div class="action-content">
                <h4>Visualizar Escala</h4>
                <p>Gerenciar e editar servi√ßos cadastrados</p>
              </div>
              <div class="action-arrow">
                <ng-icon name="lucideChevronRight" class="arrow-icon"></ng-icon>
              </div>
            </div>

            <div class="action-card" routerLink="/configuracao-valores">
              <div class="action-icon">
                <ng-icon name="lucideSettings" class="action-icon-svg"></ng-icon>
              </div>
              <div class="action-content">
                <h4>Configurar Valores</h4>
                <p>Ajustar valores base e benef√≠cios</p>
              </div>
              <div class="action-arrow">
                <ng-icon name="lucideChevronRight" class="arrow-icon"></ng-icon>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- View Agentes -->
    <div *ngIf="currentView === 'agentes'">
      <app-agentes (voltarAoDashboard)="navigateTo('dashboard')"></app-agentes>
    </div>

    <!-- View Servi√ßos RAS -->
    <div *ngIf="currentView === 'servicos-ras'">
      <app-servicos-ras></app-servicos-ras>
    </div>
  </main>
</div>
